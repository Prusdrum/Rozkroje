jobs:
  build:
    working_directory: ~/rozkroje
    docker:
      - image: circleci/node:7
    steps:
      - checkout
      - run:
          name: Install dependencies
          command: npm install
      - run:
          name: Build client app
          command: npm run client:build
      - run: 
          name: Run Tests
          command: npm run test
      - deployment
      # - run: 
      #     name: Deploy
      #     command: |
      #       git config user.email $GIT_EMAIL
      #       git config user.name $GIT_NAME
      #       git add .
      #       git commit -m "heroku commit"
      #       git push heroku master

branches:
  only:
    - new-app

deployment:
  production:
    branch: new-app
    heroku:
      appname: rozkroje